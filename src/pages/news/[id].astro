---
export const prerender = false;
import Layout from '../../layouts/Layout.astro';
const { id } = Astro.params;
const kBaseApiUrl = 'https://api.radiostrike.jp';

interface NewsItem {
  id: number;
  title: string;
  content: string;
  created_at: string;
}

let item: NewsItem | null = null;
try {
  const res = await fetch(`${kBaseApiUrl}/api/podcast/news/${id}`);
  if (res.ok) item = await res.json();
} catch (e) { console.error(e); }

const AD_CLIENT = "pub-4672119085382684";
const AD_SLOT = "6212645008";
---

<Layout title={item ? item.title : "お知らせ詳細"}>
  <div class="news-container animate-in">
    {item ? (
      <article class="news-article">
        <header class="news-header">
          <time>{new Date(item.created_at).toLocaleDateString('ja-JP')}</time>
          <h1>{item.title}</h1>
        </header>

        <div class="news-body" set:html={item.content} />

        <div class="ad-slot-wrapper">
          <ins class="adsbygoogle"
               style="display:block; width: 100%; height: 100%;"
               data-ad-client={AD_CLIENT}
               data-ad-slot={AD_SLOT}
               data-ad-format="horizontal"
               data-full-width-responsive="false"></ins>
        </div>

        <footer class="news-footer">
          <a href="/news" class="back-link">← お知らせ一覧に戻る</a>
        </footer>
      </article>
    ) : (
      <div class="not-found">指定された記事は見つかりませんでした。</div>
    )}
  </div>
</Layout>

<style>
  .news-container { max-width: 800px; margin: 0 auto; padding: 40px 20px; }
  @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  .animate-in { animation: fadeInUp 0.6s ease-out forwards; }

  .news-header { border-bottom: 2px solid #3f51b5; padding-bottom: 25px; margin-bottom: 40px; }
  time { color: #3f51b5; font-weight: 800; font-size: 14px; }
  h1 { font-size: 30px; margin-top: 15px; line-height: 1.4; color: #1a1a1a; font-weight: 900; }

  .news-body { line-height: 2; font-size: 17px; color: #333; }
  .news-body :global(p) { margin-bottom: 25px; }
  .news-body :global(strong) { color: #3f51b5; }
  .news-body :global(a) { color: #3f51b5; text-decoration: underline; }

  .news-footer { margin-top: 60px; text-align: center; border-top: 1px solid #f0f0f0; padding-top: 30px; }
  .back-link { color: #3f51b5; font-weight: bold; font-size: 16px; }

  .not-found { text-align: center; padding: 100px 0; color: #666; }
</style>